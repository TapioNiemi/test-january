<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Interactive 2D Reference Frames</title>
<style>
  body { margin: 20px; font-family: sans-serif; line-height: 1.5; }
  canvas { border:1px solid #ccc; display:block; margin: 20px auto; background:#f9f9f9; }
  .control { margin: 10px auto; width: 260px; display: flex; flex-direction: column; }
  .slider-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
  }
  .slider-row label { width: 40px; }
  .slider-row input[type=range] { flex: 1; margin: 0 10px; }
  .value-box { width: 45px; text-align: right; font-weight: bold; }
  button { margin-top: 10px; padding: 5px; }
  h1, h2 { text-align: center; }
  p { max-width: 700px; margin: auto; }
</style>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

 <h1>Linear Motion in 2D</h1> 
<p>This page illustrates two coordinate frames: one fixed laboratory frame and one moving.</p> 
<h2>1. Frames</h2> 
<p><strong><span style="color: blue;">Frame V</span></strong>: fixed.</p>
<p><strong><span style="color: red;">Frame V'</span></strong>: moving.
 Motion is described by velocity vector \(v = (v_x,\; v_y)\).</p> 
<h2>2. Position of Moving Frame</h2> 
<p>Origin of \(V^{'}\;:\; O^{'}(t)\; =\; (x_0 + v_x \cdot t,\; y_0 + v_y \cdot t)\)</p> 

<h2>3. Coordinate Transform</h2> 
<p>A point P has coordinates in V : \(P(t) = O'(t) + (x_0^{'}+v_x^{'}t, y_0^{'}+v_y^{'}t)\)</p> <h2>4. Velocity Transform</h2> <p>Velocity in V: \(v_{tot} = v + v'\)</p>
<h2>Controls for V'</h2>

<div class="control">

  <!-- Frame position sliders -->
  <div class="slider-row">
    <label>x₀:</label>
    <input id="x_0" type="range" min="-3" max="3" step="0.1" value="1">
    <div id="x_0_val" class="value-box">1.0</div>
  </div>

  <div class="slider-row">
    <label>y₀:</label>
    <input id="y_0" type="range" min="-3" max="3" step="0.1" value="0.5">
    <div id="y_0_val" class="value-box">0.5</div>
  </div>

  <div class="slider-row">
    <label>vx:</label>
    <input id="vx" type="range" min="-2" max="2" step="0.1" value="0.5">
    <div id="vx_val" class="value-box">0.5</div>
  </div>

  <div class="slider-row">
    <label>vy:</label>
    <input id="vy" type="range" min="-2" max="2" step="0.1" value="0">
    <div id="vy_val" class="value-box">0.0</div>
  </div>

  <hr>
  
<!-- Point position sliders -->
<h2>Controls for Point P'</h2>
  
  <div class="slider-row">
    <label>x₀′:</label>
    <input id="px0" type="range" min="-2" max="2" step="0.1" value="0.5">
    <div id="px0_val" class="value-box">0.5</div>
  </div>

  <div class="slider-row">
    <label>y₀′:</label>
    <input id="py0" type="range" min="-2" max="2" step="0.1" value="0.5">
    <div id="py0_val" class="value-box">0.5</div>
  </div>

  <!-- Relative velocity sliders -->
  <div class="slider-row">
    <label>v′x:</label>
    <input id="pvx" type="range" min="-2" max="2" step="0.1" value="0.3">
    <div id="pvx_val" class="value-box">0.3</div>
  </div>

  <div class="slider-row">
    <label>v′y:</label>
    <input id="pvy" type="range" min="-2" max="2" step="0.1" value="0.1">
    <div id="pvy_val" class="value-box">0.1</div>
  </div>

  <button id="startBtn">Start</button>
  <button id="resetBtn">Reset</button>

</div>

<canvas id="canvas" width="600" height="600"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let t = 0;
let animationId = null;

// Function to update display value
function updateValueDisplay(id) {
    const slider = document.getElementById(id);
    const label = document.getElementById(id + "_val");
    if (label) label.textContent = slider.value;
}

// All slider names
const ids = ['x_0','y_0','vx','vy','px0','py0','pvx','pvy'];

// Add listeners for sliders
ids.forEach(id => {
    updateValueDisplay(id);
    document.getElementById(id).addEventListener('input', e => {
        updateValueDisplay(id);
    });
});

function drawFrame() {
    const x_0 = parseFloat(x_0_el.value);
    const y_0 = parseFloat(y_0_el.value);
    const vx = parseFloat(vx_el.value);
    const vy = parseFloat(vy_el.value);

    const px0 = parseFloat(px0_el.value);
    const py0 = parseFloat(py0_el.value);
    const pvx = parseFloat(pvx_el.value);
    const pvy = parseFloat(pvy_el.value);

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const scale = 50;
    const vecScale = 40;   // controls arrow length
    const originX = canvas.width/2;
    const originY = canvas.height/2;

    // Fixed frame (blue)
    ctx.strokeStyle = 'blue';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(originX - 200, originY);
    ctx.lineTo(originX + 200, originY);
    ctx.moveTo(originX, originY - 200);
    ctx.lineTo(originX, originY + 200);
    ctx.stroke();

    // Moving frame origin
    const Ox = originX + (x_0 + vx*t)*scale;
    const Oy = originY - (y_0 + vy*t)*scale;

    // Moving frame axes (red)
    ctx.strokeStyle = 'red';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(Ox - 100, Oy);
    ctx.lineTo(Ox + 100, Oy);
    ctx.moveTo(Ox, Oy - 100);
    ctx.lineTo(Ox, Oy + 100);
    ctx.stroke();

    // Point inside V'
    const Px = Ox + (px0 + pvx*t)*scale;
    const Py = Oy - (py0 + pvy*t)*scale;

    ctx.fillStyle = 'red';
    ctx.beginPath();
    ctx.arc(Px, Py, 6, 0, Math.PI*2);
    ctx.fill();

    // ====== Draw velocity vectors starting from P ======
    function drawArrow(x, y, dx, dy, color) {
        ctx.strokeStyle = color;
        ctx.fillStyle = color;
        ctx.lineWidth = 2;

        const endX = x + dx;
        const endY = y + dy;

        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(endX, endY);
        ctx.stroke();

        // Arrowhead
        const angle = Math.atan2(dy, dx);
        const size = 7;

        ctx.beginPath();
        ctx.moveTo(endX, endY);
        ctx.lineTo(endX - size*Math.cos(angle - Math.PI/6),
                   endY - size*Math.sin(angle - Math.PI/6));
        ctx.lineTo(endX - size*Math.cos(angle + Math.PI/6),
                   endY - size*Math.sin(angle + Math.PI/6));
        ctx.closePath();
        ctx.fill();
    }

    // v in lab frame (blue)
    drawArrow(Px, Py, vx*vecScale, -vy*vecScale, "blue");

    // v' in moving frame (green)
    drawArrow(Px, Py, pvx*vecScale, -pvy*vecScale, "green");

    // v + v' total (purple)
    const vtotx = vx + pvx;
    const vtoty = vy + pvy;
    drawArrow(Px, Py, vtotx*vecScale, -vtoty*vecScale, "purple");
}


function animate() {
    drawFrame();
    t += 0.01;
    animationId = requestAnimationFrame(animate);
}

document.getElementById("startBtn").addEventListener("click", () => {
    if (!animationId) animate();
});

document.getElementById("resetBtn").addEventListener("click", () => {
    if (animationId) cancelAnimationFrame(animationId);
    animationId = null;
    t = 0;
    drawFrame();
});

// Cache DOM elements for faster access
const x_0_el = document.getElementById('x_0');
const y_0_el = document.getElementById('y_0');
const vx_el = document.getElementById('vx');
const vy_el = document.getElementById('vy');
const px0_el = document.getElementById('px0');
const py0_el = document.getElementById('py0');
const pvx_el = document.getElementById('pvx');
const pvy_el = document.getElementById('pvy');

// Initial draw
drawFrame();
</script>

</body>

</html>
